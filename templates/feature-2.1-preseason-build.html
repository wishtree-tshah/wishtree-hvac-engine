<!-- ============================================ -->
<!-- FEATURE 2.1: PRE-SEASON BUILD STATUS DASHBOARD -->
<!-- Location: Insert into #view-inventory div -->
<!-- ============================================ -->

<div class="dashboard-grid">
    <!-- Pre-Season Header -->
    <div class="glass-panel wide" style="grid-column: span 4;">
        <div class="panel-header">
            <h3><i class="fa-solid fa-calendar-check"></i> Pre-Season Build Status: Cooling 2025</h3>
            <div class="season-info">
                <span class="season-badge">Target: May 31, 2025</span>
                <span class="progress-badge success">96.4% Complete</span>
            </div>
        </div>
    </div>

    <!-- Category Status Cards -->
    <div class="glass-panel">
        <div class="build-status-card behind">
            <div class="status-icon">
                <i class="fa-solid fa-triangle-exclamation"></i>
            </div>
            <div class="status-content">
                <div class="category-name">3-5T Condensers</div>
                <div class="region">Houston</div>
                <div class="metrics">
                    <div class="metric">
                        <span class="label">Target</span>
                        <span class="value">1,200</span>
                    </div>
                    <div class="metric">
                        <span class="label">Current</span>
                        <span class="value">860</span>
                    </div>
                    <div class="metric">
                        <span class="label">Gap</span>
                        <span class="value danger">-340</span>
                    </div>
                </div>
                <div class="status-badge behind">Behind</div>
                <div class="days-remaining">12 days remaining</div>
            </div>
        </div>
    </div>

    <div class="glass-panel">
        <div class="build-status-card at-risk">
            <div class="status-icon">
                <i class="fa-solid fa-clock"></i>
            </div>
            <div class="status-content">
                <div class="category-name">2-3T Split Systems</div>
                <div class="region">Dallas</div>
                <div class="metrics">
                    <div class="metric">
                        <span class="label">Target</span>
                        <span class="value">850</span>
                    </div>
                    <div class="metric">
                        <span class="label">Current</span>
                        <span class="value">820</span>
                    </div>
                    <div class="metric">
                        <span class="label">Gap</span>
                        <span class="value warning">-30</span>
                    </div>
                </div>
                <div class="status-badge at-risk">At Risk</div>
                <div class="days-remaining">12 days remaining</div>
            </div>
        </div>
    </div>

    <div class="glass-panel">
        <div class="build-status-card on-track">
            <div class="status-icon">
                <i class="fa-solid fa-check-circle"></i>
            </div>
            <div class="status-content">
                <div class="category-name">Air Handlers</div>
                <div class="region">Miami</div>
                <div class="metrics">
                    <div class="metric">
                        <span class="label">Target</span>
                        <span class="value">680</span>
                    </div>
                    <div class="metric">
                        <span class="label">Current</span>
                        <span class="value">695</span>
                    </div>
                    <div class="metric">
                        <span class="label">Gap</span>
                        <span class="value success">+15</span>
                    </div>
                </div>
                <div class="status-badge on-track">On Track</div>
                <div class="days-remaining">12 days remaining</div>
            </div>
        </div>
    </div>

    <div class="glass-panel">
        <div class="build-status-card on-track">
            <div class="status-icon">
                <i class="fa-solid fa-check-circle"></i>
            </div>
            <div class="status-content">
                <div class="category-name">Coils (Evap/Cond)</div>
                <div class="region">Atlanta</div>
                <div class="metrics">
                    <div class="metric">
                        <span class="label">Target</span>
                        <span class="value">1,500</span>
                    </div>
                    <div class="metric">
                        <span class="label">Current</span>
                        <span class="value">1,485</span>
                    </div>
                    <div class="metric">
                        <span class="label">Gap</span>
                        <span class="value warning">-15</span>
                    </div>
                </div>
                <div class="status-badge on-track">On Track</div>
                <div class="days-remaining">12 days remaining</div>
            </div>
        </div>
    </div>

    <!-- Progress Chart -->
    <div class="chart-panel glass-panel wide" style="grid-column: span 4;">
        <div class="panel-header">
            <h3>Build Progress by Category</h3>
        </div>
        <div class="chart-container">
            <canvas id="preSeasonChart"></canvas>
        </div>
    </div>

    <!-- Summary Table -->
    <div class="glass-panel wide" style="grid-column: span 4;">
        <div class="panel-header">
            <h3>All Categories - Detailed Status</h3>
        </div>
        <table class="data-table">
            <thead>
                <tr>
                    <th>Category</th>
                    <th>Region</th>
                    <th>Target Units</th>
                    <th>Current Units</th>
                    <th>Gap</th>
                    <th>% Complete</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody id="preseason-table-body">
                <!-- Populated by JavaScript -->
            </tbody>
        </table>
    </div>
</div>

<!-- CSS for this feature (add to style.css) -->
<style>
    .season-info {
        display: flex;
        gap: 1rem;
        align-items: center;
    }

    .season-badge {
        padding: 0.3rem 0.8rem;
        background: rgba(59, 130, 246, 0.2);
        color: var(--primary);
        border-radius: 4px;
        font-size: 0.85rem;
    }

    .progress-badge {
        padding: 0.3rem 0.8rem;
        border-radius: 4px;
        font-size: 0.85rem;
        font-weight: 600;
    }

    .progress-badge.success {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
    }

    .build-status-card {
        padding: 1.5rem;
        border-radius: 8px;
        border-left: 4px solid var(--glass-border);
    }

    .build-status-card.behind {
        border-left-color: var(--danger);
        background: rgba(239, 68, 68, 0.05);
    }

    .build-status-card.at-risk {
        border-left-color: var(--warning);
        background: rgba(245, 158, 11, 0.05);
    }

    .build-status-card.on-track {
        border-left-color: var(--success);
        background: rgba(16, 185, 129, 0.05);
    }

    .status-icon {
        font-size: 2rem;
        margin-bottom: 1rem;
    }

    .build-status-card.behind .status-icon {
        color: var(--danger);
    }

    .build-status-card.at-risk .status-icon {
        color: var(--warning);
    }

    .build-status-card.on-track .status-icon {
        color: var(--success);
    }

    .category-name {
        font-weight: 600;
        font-size: 1.1rem;
        margin-bottom: 0.3rem;
    }

    .region {
        font-size: 0.85rem;
        color: var(--text-muted);
        margin-bottom: 1rem;
    }

    .metrics {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 0.8rem;
        margin-bottom: 1rem;
    }

    .metric {
        display: flex;
        flex-direction: column;
        gap: 0.2rem;
    }

    .metric .label {
        font-size: 0.7rem;
        color: var(--text-muted);
        text-transform: uppercase;
    }

    .metric .value {
        font-size: 1.2rem;
        font-weight: 700;
    }

    .metric .value.danger {
        color: var(--danger);
    }

    .metric .value.warning {
        color: var(--warning);
    }

    .metric .value.success {
        color: var(--success);
    }

    .status-badge {
        display: inline-block;
        padding: 0.3rem 0.8rem;
        border-radius: 4px;
        font-size: 0.75rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
    }

    .status-badge.behind {
        background: rgba(239, 68, 68, 0.2);
        color: var(--danger);
    }

    .status-badge.at-risk {
        background: rgba(245, 158, 11, 0.2);
        color: var(--warning);
    }

    .status-badge.on-track {
        background: rgba(16, 185, 129, 0.2);
        color: var(--success);
    }

    .days-remaining {
        font-size: 0.8rem;
        color: var(--text-muted);
    }
</style>

<!-- JavaScript for this feature (add to app.js) -->
<script>
    // Initialize Pre-Season Build Chart
    function initPreSeasonChart() {
        const ctx = document.getElementById('preSeasonChart');
        if (!ctx) return;

        const data = EXTENDED_DATA.inventory.preSeasonBuild.categories;
        const categories = data.map(c => c.category);
        const currentUnits = data.map(c => c.currentUnits);
        const targetUnits = data.map(c => c.targetUnits);

        new Chart(ctx.getContext('2d'), {
            type: 'bar',
            data: {
                labels: categories,
                datasets: [
                    {
                        label: 'Current Units',
                        data: currentUnits,
                        backgroundColor: '#3b82f6'
                    },
                    {
                        label: 'Target Units',
                        data: targetUnits,
                        backgroundColor: '#10b981'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { labels: { color: '#94a3b8' } } },
                scales: {
                    y: { grid: { color: 'rgba(255, 255, 255, 0.05)' }, ticks: { color: '#94a3b8' } },
                    x: { grid: { display: false }, ticks: { color: '#94a3b8' } }
                }
            }
        });
    }
</script>